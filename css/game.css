/* ============================================================
   game.css — Écran de jeu
   ============================================================ */

*, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

:root {
  --bg:        #F5F2EC;
  --ink:       #1A1814;
  --ink-faint: #6B6760;
  --accent:    #C8A96E;
}

html, body {
  width: 100%; height: 100%;
  overflow: hidden;
  background: var(--bg);
  font-family: 'Raleway', sans-serif;
}

#game-canvas {
  display: block; position: fixed; inset: 0;
  width: 100%; height: 100%;
}

/* ── HUD ── */
#hud {
  position: fixed; top: 0; left: 0; right: 0; z-index: 20;
  display: flex; align-items: center; justify-content: space-between;
  padding: 1.2rem 2rem; pointer-events: none;
}
#hud-level {
  font-weight: 300; font-size: .72rem;
  letter-spacing: .3em; text-transform: uppercase;
  color: var(--ink-faint);
}
#hud-title {
  font-weight: 300; font-size: .7rem;
  letter-spacing: .2em; text-transform: uppercase;
  color: var(--ink-faint);
  max-width: 40%; text-align: center;
}
#hud-timer {
  font-weight: 300; font-size: 1.1rem;
  letter-spacing: .1em; color: var(--accent);
  font-variant-numeric: tabular-nums;
}

/* ── Back to home button — clearly visible in top-left ── */
#btn-home {
  position: fixed; top: .85rem; left: 1.6rem;
  z-index: 25;
  background: none;
  border: 1px solid rgba(200,169,110,.35);
  cursor: pointer;
  font-family: 'Raleway', sans-serif; font-weight: 300;
  font-size: .62rem; letter-spacing: .28em; text-transform: uppercase;
  color: var(--ink-faint);
  padding: .45rem .9rem;
  transition: color .2s, border-color .2s, background .2s;
}
#btn-home:hover {
  color: var(--ink);
  border-color: var(--accent);
  background: rgba(200,169,110,.07);
}

/* ── Level transition flash ── */
#level-flash {
  position: fixed; inset: 0; z-index: 50;
  background: var(--bg); opacity: 0; pointer-events: none;
  transition: opacity .22s ease;
}
#level-flash.in { opacity: 1; }

.hidden { display: none !important; }

/* ── D-pad mobile ── */
#dpad {
  position: fixed;
  bottom: 0; left: 0; right: 0;
  height: 190px;
  z-index: 20;
  display: grid;
  grid-template-areas:
    ".    up    ."
    "left .     right"
    ".    down  .";
  grid-template-columns: repeat(3, 56px);
  grid-template-rows:    repeat(3, 56px);
  gap: 4px;
  justify-content: center;
  align-content: center;
  padding-bottom: env(safe-area-inset-bottom, 0px);
}
.dpad__btn {
  background: rgba(245,242,236,.9);
  border: 1px solid rgba(200,169,110,.45);
  color: var(--ink-faint);
  font-size: 1.3rem; line-height: 1;
  border-radius: 8px;
  width: 56px; height: 56px;
  cursor: pointer;
  display: flex; align-items: center; justify-content: center;
  -webkit-tap-highlight-color: transparent;
  user-select: none;
  touch-action: manipulation;
  transition: background .1s, color .1s, border-color .1s;
  /* shadow subtile pour relief */
  box-shadow: 0 2px 6px rgba(26,24,20,.08);
}
.dpad__btn:active,
.dpad__btn.pressed {
  background: var(--accent);
  color: #fff;
  border-color: var(--accent);
  box-shadow: 0 1px 2px rgba(26,24,20,.1);
}
#dpad-up    { grid-area: up; }
#dpad-left  { grid-area: left; }
#dpad-right { grid-area: right; }
#dpad-down  { grid-area: down; }

/* Sur desktop, on cache le dpad */
@media (min-width: 768px) {
  #dpad { display: none !important; }
}

/* ── Dev level nav sidebar ── */
#dev-nav {
  position: fixed; right: 0; top: 50%;
  transform: translateY(-50%);
  z-index: 40; background: rgba(245,242,236,.94);
  border-left: 1px solid rgba(200,169,110,.3);
  backdrop-filter: blur(4px);
  padding: .8rem .5rem;
  display: flex; flex-direction: column; align-items: center; gap: .35rem;
}
.dev-nav__label {
  font-weight: 300; font-size: .55rem; letter-spacing: .3em;
  text-transform: uppercase; color: var(--ink-faint);
  margin-bottom: .3rem;
}
.dev-nav__btn {
  background: none; border: 1px solid rgba(200,169,110,.3);
  color: var(--ink-faint); cursor: pointer;
  font-family: 'Raleway', sans-serif; font-weight: 300;
  font-size: .65rem; letter-spacing: .05em;
  width: 2.1rem; height: 2.1rem;
  display: flex; align-items: center; justify-content: center;
  transition: background .2s, color .2s, border-color .2s;
}
.dev-nav__btn:hover { background: var(--accent); color: #fff; border-color: var(--accent); }
.dev-nav__btn.active { background: var(--accent); color: #fff; border-color: var(--accent); }

/* ── HUD layout adjustment ── */
/* btn-home is fixed top-left, so hud starts after it */
#hud {
  padding-left: 8rem; /* leave room for btn-home */
}

/* ── Mobile: HUD compact ── */
@media (max-width: 767px) {
  #hud {
    padding: .7rem 1rem .7rem 7rem; /* laisse place au btn-home */
  }
  #hud-level { font-size: .65rem; }
  #hud-title { display: none; } /* trop d'infos sur petit écran */
  #btn-home {
    top: .6rem; left: 1rem;
    font-size: .58rem; padding: .38rem .7rem;
  }
}
